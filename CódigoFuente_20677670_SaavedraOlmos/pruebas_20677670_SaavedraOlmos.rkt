#lang racket

(require "TDAOption_20677670_SaavedraOlmos.rkt")
(require "TDAFlow_20677670_SaavedraOlmos.rkt")
(require "TDAChatbot_20677670_SaavedraOlmos.rkt")
(require "TDASystem_20677670_SaavedraOlmos.rkt")
(require "TDAChatHistory_20677670_SaavedraOlmos.rkt")


(define op1 (option  1 "1) Viajar" 2 1 "viajar" "turistear" "conocer"))
(define op2 (option  2 "2) Estudiar" 3 1 "estudiar" "aprender" "perfeccionarme"))
(define f10 (flow 1 "flujo1" op1 op2 op2 op2 op2 op1)) 
(define f11 (flow-add-option f10 op1)) 
(define cb0 (chatbot 0 "Inicial" "Bienvenido\n¿Qué te gustaría hacer?" 1 f10 f10 f10 f10))  

(define op3 (option 1 "1)Mendoza, Argentina" 1 2 "Argentina" "Mendoza"))
(define op4 (option 2 "2)Venecia, Italia" 1 1 "Italia" "Venecia"))
(define op5 (option 3 "3)Barcelona, España" 1 2 "ESP" "Barcelona" "España"))
(define op6 (option 4 "4)Rio de Janeiro, Brasil" 1 1 "BR" "Rio" "Brasil"))
(define op7 (option 5 "5)Volver" 0 1 "Regresar" "Salir" "Volver"))

(define op8 (option 1 "1)Termas de Cacheuta" 1 2 "Termas" "Termas de Cacheuta"))
(define op9 (option 2 "2)Parque General San Martín" 1 2 "Parque" "Parque San Martín"))
(define op10 (option 3 "3)Puente del Inca" 1 2 "Puente" "Puente del Inca"))
(define op11 (option 4 "4)Ningun otro atractivo" 1 3 "Museo"))
(define op12 (option 5 "5)Cambiar destino" 1 2 "Volver" "Cambiar" "Salir"))

(define op13 (option 1 "1)Casa Batlló" 1 2 "Casa" "Batlló"))
(define op14 (option 2 "2)Catedral de Barcelona" 1 2 "Catedral" "Iglesia"))
(define op15 (option 3 "3)Camp Nou" 1 2 "Estadio" "Fútbol"))
(define op16 (option 4 "4)Ningun otro atractivo" 1 3 "La Pedrera"))
(define op17 (option 5 "5)Cambiar destino" 1 2 "Volver" "Cambiar" "Salir"))

(define op18 (option 1 "1)Solo" 1 3 "Solo"))
(define op19 (option 2 "2)En pareja" 1 3 "Pareja"))
(define op20 (option 3 "3)En familia" 1 3 "Familia"))
(define op21 (option 4 "4)En Pareja" 1 3 "Pareja"))
(define op22 (option 5 "5)Solo" 1 3 "Solo"))

(define f12 (flow 1 "Flujo 1 Chatbot1\n¿Dónde te gustaría ir?" op3 op4 op5 op6))
(define f13 (flow-add-option f12 op7))
(define f14 (flow 2 "Flujo 2 Chatbot1\n¿Qué atractivos te gustaría visitar?" op8 op9 op10 op11))
(define f15 (flow-add-option f14 op12))
(define f16 (flow 3 "Flujo 3 Chatbot1\n¿Qué atractivos te gustaría visitar?" op13 op14 op15 op16))
(define f17 (flow-add-option f16 op17))
(define f18 (flow 4 "Flujo 4 Chatbot1\n¿Vas solo o acompañado?" op18 op19 op20 op21))
(define f19 (flow-add-option f18 op22))

(define cb1 (chatbot 1 "Agencia Viajes" "Bienvenido\n¿Dónde quieres viajar?" 1 f13))
(define cb2 (chatbot-add-flow cb1 f15))
(define cb3 (chatbot-add-flow cb2 f17))
(define cb4 (chatbot-add-flow cb3 f19))


(define op23 (option 1 "1)Carrera Técnica" 2 1 "Técnica"))
(define op24 (option 2 "2)Postgrado" 2 1 "Doctorado" "Magister" "Postgrado"))
(define op25 (option 3 "3)Volver" 0 1 "Volver" "Salir" "Regresar"))

(define f20 (flow 1 "Flujo 1 Chatbot2\n¿Qué te gustaría hacer?" op23 op24))
(define f21 (flow-add-option f20 op25))

(define cb5 (chatbot 2 "Orientador Académico" "Bienvenido\n¿Qué te gustaría estudiar?" 1 f21))

(define s0 (system "Chatbots Paradigmas" 0 cb0 cb0 cb0))
(define s0-1 (system "Chatbots Paradigmas" 0 cb4 cb4 cb5))
(define s0-2 (system "Chatbots Paradigmas" 0 cb0 cb4 cb5))
(define s1 (system-add-chatbot s0 cb0)) 
(define s2 (system-add-chatbot s1 cb4))
(define s3 (system-add-chatbot s2 cb5))
(define s4 (system-add-user s3 "user1"))
(define s5 (system-add-user s4 "user2"))
(define s6 (system-add-user s5 "user2")) 
(define s7 (system-add-user s6 "user4"))
(define s8 (system-add-user s7 "user5"))
(define s9 (system-add-user s8 "user11"))
(define s10 (system-add-user s9 "user13"))
(define s11 (system-login s10 "user8")) 
(define s12 (system-login s11 "user1"))
(define s13 (system-login s12 "user2"))  
(define s14 (system-logout s13))
(define s15 (system-login s14 "user2"))
(define s16 (system-logout s15))
(define s17 (system-login s16 "user3"))
(define s18 (system-login s17 "user11"))
(define s19 (system-login s18 "user2"))
(define s20 (system-logout s19))
(define s21 (system-login s20 "user2"))


(define s22 (system-talk-rec s21 "hola"))
(define s23 (system-talk-rec s22 "1"))
(define s24 (system-talk-rec s23 "1"))
(define s25 (system-talk-norec s24 "Museo"))
(define s26 (system-talk-norec s25 "1"))
(define s27 (system-talk-norec s26 "3"))
(define s28 (system-talk-norec s27 "5"))
(display (system-synthesis s28 "user2"))
(system-simulate s3 5 32131)

(define s29 (system-talk-rec s21 "hola"))
(define s30 (system-talk-rec s29 "1"))
(define s31 (system-talk-rec s23 "3"))
(define s32 (system-talk-norec s24 "La Pedrera"))
(define s33 (system-talk-norec s25 "1"))
(define s34 (system-talk-norec s26 "2"))
(define s35 (system-talk-norec s27 "5"))
(display (system-synthesis s28 "user2"))
(system-simulate s3 5 32131)

(define s36 (system-talk-rec s21 "hola"))
(define s37 (system-talk-rec s22 "1"))
(define s38 (system-talk-rec s23 "1"))
(define s39 (system-talk-norec s24 "Museo"))
(define s40 (system-talk-norec s25 "1"))
(define s41 (system-talk-norec s26 "3"))
(define s42 (system-talk-norec s27 "4"))
(display (system-synthesis s28 "user2"))
(system-simulate s3 6 10245)

(define s43 (system-talk-rec s21 "hola"))
(define s44 (system-talk-rec s44 "1"))
(define s45 (system-talk-rec s45 "4"))
(define s46 (system-talk-norec s46 "1"))
(define s47 (system-talk-norec s47 "1"))
(define s48 (system-talk-norec s48 "3"))
(define s49 (system-talk-norec s49 "5"))
(display (system-synthesis s3 "user2"))
(system-simulate s3 5 15273)